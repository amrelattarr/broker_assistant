<div class="chat-container">
  <!-- <div class="chat-header">
    <h2>Capital Market Assistant</h2>
    <p>Ask me anything about stocks, investments, or market trends</p>
  </div> -->
  
  <div class="messages" #messagesContainer>
    @for (msg of messages; track $index) {
      <div class="message" [ngClass]="msg.sender">
        <div class="message-content">
          @if (msg.sender === 'bot') {
            <div class="bot-avatar">ðŸ¤–</div>
          } @else {
            <div class="user-avatar">ðŸ‘¤</div>
          }
          <div class="message-text">
            {{ msg.text }}
            @if (msg.isLink && msg.link) {
              <div class="stocks-link">
                <a [routerLink]="msg.link" class="stocks-button">{{ msg.linkText || 'View' }}</a>
              </div>
            }
          </div>
        </div>
      </div>
    }
    
    @if (isLoading) {
      <div class="message bot">
        <div class="message-content">
          <div class="bot-avatar">ðŸ¤–</div>
          <div class="message-text">
            <div class="typing-indicator">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </div>
    }
  </div>

  <div class="input-container">
    <input type="text"
           [(ngModel)]="userMessage"
           [disabled]="isLoading"
           placeholder="Ask me about stocks, investments, or market trends..."
           (keyup.enter)="!isLoading && sendMessage()" />
    <button (click)="sendMessage()" [disabled]="!userMessage.trim() || isLoading">
      @if (isLoading) {
        <span class="spinner"></span>
      } @else {
        <span>Send</span>
      }
    </button>
  </div>
</div>