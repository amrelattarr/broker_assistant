<div class="container py-4">
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <h2 class="display-6 mb-3 mb-md-0">All Stocks</h2>
        <div class="d-flex align-items-center">
          <span class="text-muted me-2">Balance: </span>
          <div class="d-flex align-items-center" style="min-width: 120px;">
              <span class="h4 mb-0 text-success fw-bold">
                {{balance}} EGP
              </span>
            <ng-template #loading>
              <div class="d-flex align-items-center">
                <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <span class="text-muted">Loading...</span>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
      <hr class="mt-3">
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th scope="col" class="ps-4">Stock ID</th>
          <th scope="col" class="ps-4">Company</th>
          <th scope="col" class="text-end">Value</th>
          <th scope="col" class="text-center">Symbol</th>
          <th scope="col" class="text-end">Open</th>
          <th scope="col" class="text-end">Close</th>
          <th scope="col" class="text-end">Change</th>
          <th scope="col" class="text-end pe-4">Action</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        @for (stock of stockList; track stock.stockId) {
          <tr [class.highlighted]="stock.stockId === highlightedStockId" class="position-relative" #stockRow>
            <td class="ps-4 fw-medium">{{ stock.stockId }}</td>
            <td class="ps-4 fw-medium">{{ stock.englishName }}</td>
            <td class="text-end">{{ stock.value | number:'1.2-2' }}</td>
            <td class="text-center">
              <span class="badge bg-primary bg-opacity-10 text-primary px-3 py-2">
                {{ stock.symbol }}
              </span>
            </td>
            <td class="text-end">{{ stock.open | number:'1.2-2' }}</td>
            <td class="text-end">{{ stock.close | number:'1.2-2' }}</td>
            <td class="text-end fw-medium" [class.text-success]="stock.change >= 0" [class.text-danger]="stock.change < 0">
              {{ stock.change | number:'1.2-2' }}%
            </td>
            <td class="text-end pe-4">
              <button class="btn btn-sm btn-success px-3">
                <i class="bi bi-cart-plus me-1"></i> Buy
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
